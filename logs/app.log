2025-07-12 20:39:16,959 [__main__] INFO: Loaded config, starting up
2025-07-12 20:39:17,047 [src.data_loading] INFO: Fetching bars since 2025-07-12 14:10:00 (+1ms)
2025-07-12 20:39:21,165 [src.data_loading] INFO: Appended 8 rows up to 2025-07-12 14:50:00 (total 2683 rows)
2025-07-12 20:39:21,342 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-12 20:39:32,655 [__main__] INFO: Retuning using only top SHAP features...
2025-07-12 20:39:36,911 [__main__] INFO: Retraining final model using top features and best params...
2025-07-12 20:39:37,242 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-12 20:48:09,650 [__main__] INFO: Loaded config, starting up
2025-07-12 20:48:09,709 [src.data_loading] INFO: Fetching bars since 2025-07-12 14:50:00 (+1ms)
2025-07-12 20:48:13,162 [src.data_loading] INFO: Appended 2 rows up to 2025-07-12 15:00:00 (total 2685 rows)
2025-07-12 20:48:13,394 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-12 20:48:24,733 [__main__] INFO: Retuning using only top SHAP features...
2025-07-12 20:48:27,213 [__main__] INFO: Retraining final model using top features and best params...
2025-07-12 20:48:27,540 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-12 20:51:17,313 [__main__] INFO: Loaded config, starting up
2025-07-12 20:51:17,345 [src.data_loading] INFO: Fetching bars since 2025-07-12 15:00:00 (+1ms)
2025-07-12 20:51:21,035 [src.data_loading] INFO: Appended 1 rows up to 2025-07-12 15:05:00 (total 2686 rows)
2025-07-12 20:51:21,191 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-12 20:51:42,909 [__main__] INFO: Retuning using only top SHAP features...
2025-07-12 20:51:47,384 [__main__] INFO: Retraining final model using top features and best params...
2025-07-12 20:51:47,956 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-12 20:51:48,032 [test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-12 20:51:48,123 [test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-12 20:51:48,234 [test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-12 20:51:48,355 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move      pnl
time                                       ...                                
2025-07-12 14:45:00  117493.4   -0.000932  ...            -109.535513 -0.00000
2025-07-12 14:50:00  117380.8   -0.000763  ...             -89.519864 -0.00000
2025-07-12 14:55:00  117416.4   -0.001081  ...            -126.881880 -0.00000
2025-07-12 15:00:00  117395.4   -0.001410  ...            -165.477675  0.05251
2025-07-12 15:05:00  117405.6         NaN  ...                    NaN      NaN

[5 rows x 9 columns]
2025-07-12 20:51:48,435 [__main__] INFO: ðŸ’° Total PnL: $79.13
2025-07-12 21:14:16,520 [__main__] INFO: Loaded config, starting up
2025-07-12 21:14:16,653 [src.data_loading] INFO: Fetching bars since 2025-07-12 15:05:00 (+1ms)
2025-07-12 21:14:23,868 [src.data_loading] INFO: Appended 4 rows up to 2025-07-12 15:25:00 (total 2690 rows)
2025-07-12 21:14:24,306 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-12 21:14:48,495 [__main__] INFO: Retuning using only top SHAP features...
2025-07-12 21:14:55,125 [__main__] INFO: Retraining final model using top features and best params...
2025-07-12 21:14:56,501 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-12 21:14:56,609 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-12 21:14:56,765 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-12 21:14:56,931 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-12 21:14:57,150 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-12 15:05:00  117405.6   -0.001434  ...            -168.323777  0.069799
2025-07-12 15:10:00  117437.2   -0.001677  ...            -196.961744  0.084655
2025-07-12 15:15:00  117438.2   -0.001654  ...            -194.293575  0.102870
2025-07-12 15:20:00  117360.4   -0.001156  ...            -135.669874  0.071641
2025-07-12 15:25:00  117375.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-12 21:14:57,243 [__main__] INFO: ðŸ’° Total PnL: $79.46
2025-07-12 21:38:24,024 [__main__] INFO: Loaded config, starting up
2025-07-12 21:38:24,146 [src.data_loading] INFO: Fetching bars since 2025-07-12 15:25:00 (+1ms)
2025-07-12 21:38:28,785 [src.data_loading] INFO: Appended 5 rows up to 2025-07-12 15:50:00 (total 2695 rows)
2025-07-12 21:38:29,067 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-12 21:38:52,935 [__main__] INFO: Retuning using only top SHAP features...
2025-07-12 21:38:57,084 [__main__] INFO: Retraining final model using top features and best params...
2025-07-12 21:38:58,508 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-12 21:38:58,579 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-12 21:38:58,690 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-12 21:38:58,808 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-12 21:38:58,956 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-12 15:30:00  117298.6   -0.001271  ...            -149.118763  0.068788
2025-07-12 15:35:00  117126.1   -0.000894  ...            -104.749519  0.041742
2025-07-12 15:40:00  117003.0    0.000024  ...               2.826131  0.000000
2025-07-12 15:45:00  117007.1    0.000030  ...               3.532238  0.000000
2025-07-12 15:50:00  117043.4         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-12 21:38:59,080 [__main__] INFO: ðŸ’° Total PnL: $79.63
2025-07-13 17:06:52,399 [__main__] INFO: Loaded config, starting up
2025-07-13 17:06:52,459 [src.data_loading] INFO: Fetching bars since 2025-07-12 15:50:00 (+1ms)
2025-07-13 17:06:55,073 [src.data_loading] INFO: Appended 234 rows up to 2025-07-13 11:20:00 (total 2929 rows)
2025-07-13 17:06:55,226 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:07:06,028 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:07:08,355 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:07:08,747 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:07:08,797 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:07:08,869 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:07:08,958 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:07:09,052 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:00:00  117787.1   -0.001698  ...            -200.020638  0.290281
2025-07-13 11:05:00  117830.7   -0.001552  ...            -182.861703  0.269125
2025-07-13 11:10:00  117862.0   -0.001171  ...            -138.053086  0.179944
2025-07-13 11:15:00  117899.9   -0.001109  ...            -130.793614  0.128163
2025-07-13 11:20:00  117900.0         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:07:09,110 [__main__] INFO: ðŸ’° Total PnL: $111.86
2025-07-13 17:08:56,919 [__main__] INFO: Loaded config, starting up
2025-07-13 17:08:56,949 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:20:00 (+1ms)
2025-07-13 17:08:59,737 [src.data_loading] INFO: No new bars returned.
2025-07-13 17:08:59,882 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:09:08,718 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:09:10,685 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:09:11,008 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:09:11,052 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:09:11,115 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:09:11,187 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:09:11,279 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:00:00  117787.1   -0.001698  ...            -200.020638  0.290281
2025-07-13 11:05:00  117830.7   -0.001552  ...            -182.861703  0.269125
2025-07-13 11:10:00  117862.0   -0.001171  ...            -138.053086  0.179944
2025-07-13 11:15:00  117899.9   -0.001109  ...            -130.793614  0.128163
2025-07-13 11:20:00  117900.0         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:09:11,331 [__main__] INFO: ðŸ’° Total PnL: $111.86
2025-07-13 17:09:32,162 [__main__] INFO: Loaded config, starting up
2025-07-13 17:09:32,183 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:20:00 (+1ms)
2025-07-13 17:09:35,082 [src.data_loading] INFO: No new bars returned.
2025-07-13 17:09:35,248 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:09:48,871 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:09:53,795 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:09:54,516 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:09:54,579 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:09:54,667 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:09:54,773 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:09:54,887 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:00:00  117787.1   -0.001698  ...            -200.020638  0.290281
2025-07-13 11:05:00  117830.7   -0.001552  ...            -182.861703  0.269125
2025-07-13 11:10:00  117862.0   -0.001171  ...            -138.053086  0.179944
2025-07-13 11:15:00  117899.9   -0.001109  ...            -130.793614  0.128163
2025-07-13 11:20:00  117900.0         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:09:54,978 [__main__] INFO: ðŸ’° Total PnL: $111.86
2025-07-13 17:11:52,716 [__main__] INFO: Loaded config, starting up
2025-07-13 17:11:52,741 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:20:00 (+1ms)
2025-07-13 17:11:55,542 [src.data_loading] INFO: Appended 1 rows up to 2025-07-13 11:25:00 (total 2930 rows)
2025-07-13 17:11:55,764 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:12:05,956 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:12:08,869 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:12:09,441 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:12:09,493 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:12:09,582 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:12:09,681 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:12:09,785 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:05:00  117830.7   -0.001552  ...            -182.861703  0.269125
2025-07-13 11:10:00  117862.0   -0.001171  ...            -138.053086  0.179944
2025-07-13 11:15:00  117899.9   -0.001109  ...            -130.793614  0.128163
2025-07-13 11:20:00  117900.0   -0.001186  ...            -139.796632  0.199635
2025-07-13 11:25:00  118010.9         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:12:09,841 [__main__] INFO: ðŸ’° Total PnL: $112.06
2025-07-13 17:13:56,045 [__main__] INFO: Loaded config, starting up
2025-07-13 17:13:56,070 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:25:00 (+1ms)
2025-07-13 17:13:59,642 [src.data_loading] INFO: No new bars returned.
2025-07-13 17:13:59,781 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:14:13,887 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:14:17,268 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:14:17,721 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:14:17,785 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:14:17,899 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:14:17,990 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:14:18,092 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:05:00  117830.7   -0.001552  ...            -182.861703  0.269125
2025-07-13 11:10:00  117862.0   -0.001171  ...            -138.053086  0.179944
2025-07-13 11:15:00  117899.9   -0.001109  ...            -130.793614  0.128163
2025-07-13 11:20:00  117900.0   -0.001186  ...            -139.796632  0.199635
2025-07-13 11:25:00  118010.9         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:14:18,159 [__main__] INFO: ðŸ’° Total PnL: $112.06
2025-07-13 17:15:16,542 [__main__] INFO: Loaded config, starting up
2025-07-13 17:15:16,567 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:25:00 (+1ms)
2025-07-13 17:15:19,064 [src.data_loading] INFO: Appended 1 rows up to 2025-07-13 11:30:00 (total 2931 rows)
2025-07-13 17:15:19,300 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:15:39,602 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:15:43,442 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:15:43,918 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:15:43,981 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:15:44,067 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:15:44,162 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:15:44,286 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:10:00  117862.0   -0.001171  ...            -138.053086  0.179944
2025-07-13 11:15:00  117899.9   -0.001109  ...            -130.793614  0.128163
2025-07-13 11:20:00  117900.0   -0.001186  ...            -139.796632  0.199635
2025-07-13 11:25:00  118010.9   -0.001023  ...            -120.688633  0.197635
2025-07-13 11:30:00  118014.5         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:15:44,358 [__main__] INFO: ðŸ’° Total PnL: $112.26
2025-07-13 17:15:44,824 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:17:19,312 [__main__] INFO: Loaded config, starting up
2025-07-13 17:17:19,342 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:30:00 (+1ms)
2025-07-13 17:17:22,244 [src.data_loading] INFO: No new bars returned.
2025-07-13 17:17:22,408 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:17:32,411 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:17:34,787 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:17:35,148 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:17:35,198 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:17:35,269 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:17:35,350 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:17:35,452 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:10:00  117862.0   -0.001171  ...            -138.053086  0.179944
2025-07-13 11:15:00  117899.9   -0.001109  ...            -130.793614  0.128163
2025-07-13 11:20:00  117900.0   -0.001186  ...            -139.796632  0.199635
2025-07-13 11:25:00  118010.9   -0.001023  ...            -120.688633  0.197635
2025-07-13 11:30:00  118014.5         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:17:35,520 [__main__] INFO: ðŸ’° Total PnL: $112.26
2025-07-13 17:17:35,918 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:20:24,200 [__main__] INFO: Loaded config, starting up
2025-07-13 17:20:24,230 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:30:00 (+1ms)
2025-07-13 17:20:26,883 [src.data_loading] INFO: Appended 1 rows up to 2025-07-13 11:35:00 (total 2932 rows)
2025-07-13 17:20:27,022 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:20:36,774 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:20:39,280 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:20:39,652 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:20:39,709 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:20:39,776 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:20:39,866 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:20:39,964 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:15:00  117899.9   -0.001109  ...            -130.793614  0.128163
2025-07-13 11:20:00  117900.0   -0.001186  ...            -139.796632  0.199635
2025-07-13 11:25:00  118010.9   -0.001023  ...            -120.688633  0.197635
2025-07-13 11:30:00  118014.5   -0.001062  ...            -125.387487  0.105796
2025-07-13 11:35:00  117976.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:20:40,020 [__main__] INFO: ðŸ’° Total PnL: $112.36
2025-07-13 17:20:40,455 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:26:16,448 [__main__] INFO: Loaded config, starting up
2025-07-13 17:26:16,516 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:35:00 (+1ms)
2025-07-13 17:26:19,349 [src.data_loading] INFO: Appended 1 rows up to 2025-07-13 11:40:00 (total 2933 rows)
2025-07-13 17:26:19,560 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:26:31,587 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:26:35,110 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:26:36,214 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:26:36,285 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:26:36,401 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:26:36,507 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:26:36,668 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:20:00  117900.0   -0.001186  ...            -139.796632  0.199635
2025-07-13 11:25:00  118010.9   -0.001023  ...            -120.688633  0.197635
2025-07-13 11:30:00  118014.5   -0.001062  ...            -125.387487  0.105796
2025-07-13 11:35:00  117976.8   -0.001118  ...            -131.913996  0.115913
2025-07-13 11:40:00  117976.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:26:36,738 [__main__] INFO: ðŸ’° Total PnL: $112.48
2025-07-13 17:27:06,152 [__main__] INFO: Loaded config, starting up
2025-07-13 17:27:06,178 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:40:00 (+1ms)
2025-07-13 17:27:08,690 [src.data_loading] INFO: No new bars returned.
2025-07-13 17:27:08,840 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:27:22,870 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:27:26,011 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:27:26,485 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:27:26,581 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:27:26,662 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:27:26,761 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:27:26,876 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:20:00  117900.0   -0.001186  ...            -139.796632  0.199635
2025-07-13 11:25:00  118010.9   -0.001023  ...            -120.688633  0.197635
2025-07-13 11:30:00  118014.5   -0.001062  ...            -125.387487  0.105796
2025-07-13 11:35:00  117976.8   -0.001118  ...            -131.913996  0.115913
2025-07-13 11:40:00  117976.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:27:26,945 [__main__] INFO: ðŸ’° Total PnL: $112.48
2025-07-13 17:27:27,615 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:31:24,284 [__main__] INFO: Loaded config, starting up
2025-07-13 17:31:24,350 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:40:00 (+1ms)
2025-07-13 17:31:26,869 [src.data_loading] INFO: Appended 1 rows up to 2025-07-13 11:45:00 (total 2934 rows)
2025-07-13 17:31:27,044 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:31:36,866 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:31:39,200 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:31:39,587 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:31:39,641 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:31:39,711 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:31:39,789 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:31:39,884 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:25:00  118010.9   -0.001023  ...            -120.688633  0.197635
2025-07-13 11:30:00  118014.5   -0.001062  ...            -125.387487  0.105796
2025-07-13 11:35:00  117976.8   -0.001118  ...            -131.913996  0.115913
2025-07-13 11:40:00  117976.8   -0.001233  ...            -145.484192  0.125476
2025-07-13 11:45:00  118001.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:31:39,940 [__main__] INFO: ðŸ’° Total PnL: $112.60
2025-07-13 17:31:40,298 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:34:37,337 [__main__] INFO: Loaded config, starting up
2025-07-13 17:34:37,396 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:45:00 (+1ms)
2025-07-13 17:34:40,270 [src.data_loading] INFO: No new bars returned.
2025-07-13 17:34:40,526 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:34:57,228 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:35:02,979 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:35:04,406 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:35:04,490 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:35:04,605 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:35:04,740 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:35:04,997 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:25:00  118010.9   -0.001023  ...            -120.688633  0.197635
2025-07-13 11:30:00  118014.5   -0.001062  ...            -125.387487  0.105796
2025-07-13 11:35:00  117976.8   -0.001118  ...            -131.913996  0.115913
2025-07-13 11:40:00  117976.8   -0.001233  ...            -145.484192  0.125476
2025-07-13 11:45:00  118001.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:35:05,139 [__main__] INFO: ðŸ’° Total PnL: $112.60
2025-07-13 17:35:05,981 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:36:30,162 [__main__] INFO: Loaded config, starting up
2025-07-13 17:36:30,198 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:45:00 (+1ms)
2025-07-13 17:36:33,161 [src.data_loading] INFO: Appended 1 rows up to 2025-07-13 11:50:00 (total 2935 rows)
2025-07-13 17:36:33,287 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:36:50,142 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:36:55,097 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:36:56,579 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:36:56,665 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:36:56,791 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:36:56,934 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:36:57,087 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:30:00  118014.5   -0.001062  ...            -125.387487  0.105796
2025-07-13 11:35:00  117976.8   -0.001118  ...            -131.913996  0.115913
2025-07-13 11:40:00  117976.8   -0.001233  ...            -145.484192  0.125476
2025-07-13 11:45:00  118001.8   -0.001253  ...            -147.824302  0.140602
2025-07-13 11:50:00  118001.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:36:57,193 [__main__] INFO: ðŸ’° Total PnL: $112.74
2025-07-13 17:36:58,116 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:38:50,088 [__main__] INFO: Loaded config, starting up
2025-07-13 17:38:50,136 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:50:00 (+1ms)
2025-07-13 17:38:52,720 [src.data_loading] INFO: No new bars returned.
2025-07-13 17:38:52,914 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:39:03,338 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:39:05,867 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:39:06,246 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:39:06,301 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:39:06,373 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:39:06,456 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:39:06,559 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:30:00  118014.5   -0.001062  ...            -125.387487  0.105796
2025-07-13 11:35:00  117976.8   -0.001118  ...            -131.913996  0.115913
2025-07-13 11:40:00  117976.8   -0.001233  ...            -145.484192  0.125476
2025-07-13 11:45:00  118001.8   -0.001253  ...            -147.824302  0.140602
2025-07-13 11:50:00  118001.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:39:06,615 [__main__] INFO: ðŸ’° Total PnL: $112.74
2025-07-13 17:39:07,002 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:39:31,357 [__main__] INFO: Loaded config, starting up
2025-07-13 17:39:31,386 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:50:00 (+1ms)
2025-07-13 17:39:34,127 [src.data_loading] INFO: No new bars returned.
2025-07-13 17:39:34,271 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:39:45,658 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:39:48,210 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:39:48,574 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:39:48,626 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:39:48,697 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:39:48,783 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:39:48,884 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:30:00  118014.5   -0.001062  ...            -125.387487  0.105796
2025-07-13 11:35:00  117976.8   -0.001118  ...            -131.913996  0.115913
2025-07-13 11:40:00  117976.8   -0.001233  ...            -145.484192  0.125476
2025-07-13 11:45:00  118001.8   -0.001253  ...            -147.824302  0.140602
2025-07-13 11:50:00  118001.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:39:48,944 [__main__] INFO: ðŸ’° Total PnL: $112.74
2025-07-13 17:39:49,317 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:41:33,177 [__main__] INFO: Loaded config, starting up
2025-07-13 17:41:33,206 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:50:00 (+1ms)
2025-07-13 17:41:35,706 [src.data_loading] INFO: Appended 1 rows up to 2025-07-13 11:55:00 (total 2936 rows)
2025-07-13 17:41:35,841 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 17:41:46,256 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 17:41:48,537 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 17:41:48,886 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 17:41:48,942 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 17:41:49,007 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 17:41:49,089 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 17:41:49,189 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move       pnl
time                                       ...                                 
2025-07-13 11:35:00  117976.8   -0.001118  ...            -131.913996  0.115913
2025-07-13 11:40:00  117976.8   -0.001233  ...            -145.484192  0.125476
2025-07-13 11:45:00  118001.8   -0.001253  ...            -147.824302  0.140602
2025-07-13 11:50:00  118001.8   -0.001245  ...            -146.927646  0.141138
2025-07-13 11:55:00  118001.8         NaN  ...                    NaN       NaN

[5 rows x 9 columns]
2025-07-13 17:41:49,239 [__main__] INFO: ðŸ’° Total PnL: $112.88
2025-07-13 17:41:49,670 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 17:44:42,164 [__main__] INFO: Final equity: $98.87
2025-07-13 17:44:42,165 [__main__] INFO: Total PnL: $0.00
2025-07-13 19:32:36,901 [__main__] INFO: Loaded config, starting up
2025-07-13 19:32:36,967 [src.data_loading] INFO: Fetching bars since 2025-07-13 11:55:00 (+1ms)
2025-07-13 19:32:39,539 [src.data_loading] INFO: Appended 22 rows up to 2025-07-13 13:45:00 (total 2958 rows)
2025-07-13 19:32:39,772 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-13 19:32:52,944 [__main__] INFO: Retuning using only top SHAP features...
2025-07-13 19:32:55,472 [__main__] INFO: Retraining final model using top features and best params...
2025-07-13 19:32:55,872 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-13 19:32:55,925 [src.test_trading_logic] INFO: Loading model for 1-minute horizon from models/xgb_h1.json
2025-07-13 19:32:55,997 [src.test_trading_logic] INFO: Loading model for 5-minute horizon from models/xgb_h5.json
2025-07-13 19:32:56,083 [src.test_trading_logic] INFO: Loading model for 10-minute horizon from models/xgb_h10.json
2025-07-13 19:32:56,184 [__main__] INFO: Trading logic output (last 5 rows):
                        close  exp_return  ...  predicted_dollar_move        pnl
time                                       ...                                  
2025-07-13 13:25:00  118337.3   -0.001275  ...            -150.861837  40.391587
2025-07-13 13:30:00  118516.7   -0.001295  ...            -153.512608  45.768865
2025-07-13 13:35:00  118499.8   -0.000934  ...            -110.711350  31.946032
2025-07-13 13:40:00  118642.4   -0.001136  ...            -134.739788  -0.000000
2025-07-13 13:45:00  118754.7         NaN  ...                    NaN        NaN

[5 rows x 9 columns]
2025-07-13 19:32:56,238 [__main__] INFO: ðŸ’° Total PnL: $124386.27
2025-07-13 19:32:56,598 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-13 19:33:21,379 [__main__] INFO: Final equity: $109053.86
2025-07-13 19:33:21,382 [__main__] INFO: Total PnL: $369.88
2025-07-14 16:36:14,882 [__main__] INFO: Loaded config, starting up
2025-07-14 16:36:14,925 [src.data_loading] INFO: Fetching bars since 2025-07-13 13:45:00 (+1ms)
2025-07-14 16:36:15,523 [src.data_loading] WARNING: fetch_ohlcv failed attempt 1/3: kraken GET https://api.kraken.com/0/public/Assets â€“ retrying in 5sâ€¦
Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 464, in _make_request
    self._validate_conn(conn)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 1093, in _validate_conn
    conn.connect()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connection.py", line 790, in connect
    sock_and_verified = _ssl_wrap_socket_and_match_hostname(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connection.py", line 969, in _ssl_wrap_socket_and_match_hostname
    ssl_sock = ssl_wrap_socket(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/ssl_.py", line 480, in ssl_wrap_socket
    ssl_sock = _ssl_wrap_socket_impl(sock, context, tls_in_tls, server_hostname)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/ssl_.py", line 524, in _ssl_wrap_socket_impl
    return ssl_context.wrap_socket(sock, server_hostname=server_hostname)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 500, in wrap_socket
    return self.sslsocket_class._create(
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 1040, in _create
    self.do_handshake()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 1309, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 488, in _make_request
    raise new_e
urllib3.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.kraken.com', port=443): Max retries exceeded with url: /0/public/Assets (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 556, in fetch
    response = self.session.request(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.kraken.com', port=443): Max retries exceeded with url: /0/public/Assets (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)')))

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/src/data_loading.py", line 21, in fetch_ohlcv_with_retry
    bars = exchange.fetch_ohlcv(symbol, timeframe, since=since, limit=limit)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/kraken.py", line 1138, in fetch_ohlcv
    self.load_markets()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 1551, in load_markets
    currencies = self.fetch_currencies()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/kraken.py", line 761, in fetch_currencies
    response = self.publicGetAssets(params)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/types.py", line 35, in unbound_method
    return _self.request(self.path, self.api, self.method, params, config=self.config)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4509, in request
    return self.fetch2(path, api, method, params, headers, body, config)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4503, in fetch2
    raise e
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4494, in fetch2
    return self.fetch(request['url'], request['method'], request['headers'], request['body'])
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 609, in fetch
    raise NetworkError(details) from e
ccxt.base.errors.NetworkError: kraken GET https://api.kraken.com/0/public/Assets
2025-07-14 16:36:20,728 [src.data_loading] WARNING: fetch_ohlcv failed attempt 2/3: kraken GET https://api.kraken.com/0/public/Assets â€“ retrying in 5sâ€¦
Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 464, in _make_request
    self._validate_conn(conn)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 1093, in _validate_conn
    conn.connect()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connection.py", line 790, in connect
    sock_and_verified = _ssl_wrap_socket_and_match_hostname(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connection.py", line 969, in _ssl_wrap_socket_and_match_hostname
    ssl_sock = ssl_wrap_socket(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/ssl_.py", line 480, in ssl_wrap_socket
    ssl_sock = _ssl_wrap_socket_impl(sock, context, tls_in_tls, server_hostname)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/ssl_.py", line 524, in _ssl_wrap_socket_impl
    return ssl_context.wrap_socket(sock, server_hostname=server_hostname)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 500, in wrap_socket
    return self.sslsocket_class._create(
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 1040, in _create
    self.do_handshake()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 1309, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 488, in _make_request
    raise new_e
urllib3.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.kraken.com', port=443): Max retries exceeded with url: /0/public/Assets (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 556, in fetch
    response = self.session.request(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.kraken.com', port=443): Max retries exceeded with url: /0/public/Assets (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)')))

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/src/data_loading.py", line 21, in fetch_ohlcv_with_retry
    bars = exchange.fetch_ohlcv(symbol, timeframe, since=since, limit=limit)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/kraken.py", line 1138, in fetch_ohlcv
    self.load_markets()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 1551, in load_markets
    currencies = self.fetch_currencies()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/kraken.py", line 761, in fetch_currencies
    response = self.publicGetAssets(params)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/types.py", line 35, in unbound_method
    return _self.request(self.path, self.api, self.method, params, config=self.config)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4509, in request
    return self.fetch2(path, api, method, params, headers, body, config)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4503, in fetch2
    raise e
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4494, in fetch2
    return self.fetch(request['url'], request['method'], request['headers'], request['body'])
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 609, in fetch
    raise NetworkError(details) from e
ccxt.base.errors.NetworkError: kraken GET https://api.kraken.com/0/public/Assets
2025-07-14 16:36:25,781 [src.data_loading] ERROR: All 3 attempts to fetch_ohlcv failed for BTC/USD/5m: kraken GET https://api.kraken.com/0/public/Assets
Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 464, in _make_request
    self._validate_conn(conn)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 1093, in _validate_conn
    conn.connect()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connection.py", line 790, in connect
    sock_and_verified = _ssl_wrap_socket_and_match_hostname(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connection.py", line 969, in _ssl_wrap_socket_and_match_hostname
    ssl_sock = ssl_wrap_socket(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/ssl_.py", line 480, in ssl_wrap_socket
    ssl_sock = _ssl_wrap_socket_impl(sock, context, tls_in_tls, server_hostname)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/ssl_.py", line 524, in _ssl_wrap_socket_impl
    return ssl_context.wrap_socket(sock, server_hostname=server_hostname)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 500, in wrap_socket
    return self.sslsocket_class._create(
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 1040, in _create
    self.do_handshake()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/ssl.py", line 1309, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 488, in _make_request
    raise new_e
urllib3.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.kraken.com', port=443): Max retries exceeded with url: /0/public/Assets (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 556, in fetch
    response = self.session.request(
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/requests/adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.kraken.com', port=443): Max retries exceeded with url: /0/public/Assets (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1129)')))

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/src/data_loading.py", line 21, in fetch_ohlcv_with_retry
    bars = exchange.fetch_ohlcv(symbol, timeframe, since=since, limit=limit)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/kraken.py", line 1138, in fetch_ohlcv
    self.load_markets()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 1551, in load_markets
    currencies = self.fetch_currencies()
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/kraken.py", line 761, in fetch_currencies
    response = self.publicGetAssets(params)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/types.py", line 35, in unbound_method
    return _self.request(self.path, self.api, self.method, params, config=self.config)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4509, in request
    return self.fetch2(path, api, method, params, headers, body, config)
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4503, in fetch2
    raise e
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 4494, in fetch2
    return self.fetch(request['url'], request['method'], request['headers'], request['body'])
  File "/Users/zachnewman/Kraken-Bot/Kraken-Bot/.venv/lib/python3.9/site-packages/ccxt/base/exchange.py", line 609, in fetch
    raise NetworkError(details) from e
ccxt.base.errors.NetworkError: kraken GET https://api.kraken.com/0/public/Assets
2025-07-14 16:37:34,696 [__main__] INFO: Loaded config, starting up
2025-07-14 16:37:34,751 [src.data_loading] INFO: Fetching bars since 2025-07-13 13:45:00 (+1ms)
2025-07-14 16:37:37,769 [src.data_loading] INFO: Appended 253 rows up to 2025-07-14 10:50:00 (total 3211 rows)
2025-07-14 16:37:37,968 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-14 16:37:50,448 [__main__] INFO: Retuning using only top SHAP features...
2025-07-14 16:37:54,308 [__main__] INFO: Retraining final model using top features and best params...
2025-07-14 16:37:55,181 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-14 16:37:55,672 [__main__] INFO: Running backtest using KrakenStrategy...
2025-07-14 16:38:11,713 [__main__] INFO: Final equity: $108353.91
2025-07-14 16:38:11,715 [__main__] INFO: Total PnL: $528.50
2025-07-14 16:55:25,234 [__main__] INFO: Loaded config, starting in pipeline mode
2025-07-14 16:55:25,302 [src.data_loading] INFO: Fetching bars since 2025-07-14 10:50:00 (+1ms)
2025-07-14 16:55:28,014 [src.data_loading] INFO: Appended 4 rows up to 2025-07-14 11:10:00 (total 3215 rows)
2025-07-14 16:55:28,199 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-14 16:55:39,232 [__main__] INFO: Retuning using only top SHAP features...
2025-07-14 16:55:41,585 [__main__] INFO: Retraining final model using top features and best params...
2025-07-14 16:55:41,924 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-14 16:56:05,213 [__main__] INFO: Loaded config, starting in pipeline mode
2025-07-14 16:56:05,243 [src.data_loading] INFO: Fetching bars since 2025-07-14 11:10:00 (+1ms)
2025-07-14 16:56:08,326 [src.data_loading] INFO: No new bars returned.
2025-07-14 16:56:08,497 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-14 16:56:22,165 [__main__] INFO: Retuning using only top SHAP features...
2025-07-14 16:56:25,101 [__main__] INFO: Retraining final model using top features and best params...
2025-07-14 16:56:25,784 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-14 16:56:36,920 [__main__] INFO: Loaded config, starting in backtest mode
2025-07-14 16:56:36,920 [__main__] INFO: Running backtest using KrakenStrategyâ€¦
2025-07-14 16:56:46,262 [__main__] INFO: Loaded config, starting in backtest mode
2025-07-14 16:56:46,262 [__main__] INFO: Running backtest using KrakenStrategyâ€¦
2025-07-14 17:24:31,226 [__main__] INFO: Loaded config, starting in pipeline mode
2025-07-14 17:24:31,328 [src.data_loading] INFO: Fetching bars since 2025-07-14 11:10:00 (+1ms)
2025-07-14 17:24:34,341 [src.data_loading] INFO: Appended 5 rows up to 2025-07-14 11:35:00 (total 3220 rows)
2025-07-14 17:24:34,508 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-14 17:24:44,161 [__main__] INFO: Retuning using only top SHAP features...
2025-07-14 17:24:47,151 [__main__] INFO: Retraining final model using top features and best params...
2025-07-14 17:24:47,542 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-14 20:44:33,506 [__main__] INFO: Loaded config, starting in pipeline mode
2025-07-14 20:44:33,625 [src.data_loading] INFO: Fetching bars since 2025-07-14 11:35:00 (+1ms)
2025-07-14 20:44:36,550 [src.data_loading] INFO: Appended 40 rows up to 2025-07-14 14:55:00 (total 3260 rows)
2025-07-14 20:44:36,746 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-14 20:44:56,149 [__main__] INFO: Retuning using only top SHAP features...
2025-07-14 20:45:00,001 [__main__] INFO: Retraining final model with top features...
2025-07-14 20:45:00,568 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-14 20:52:15,560 [__main__] INFO: Loaded config, starting in pipeline mode
2025-07-14 20:52:15,671 [src.data_loading] INFO: Fetching bars since 2025-07-14 14:55:00 (+1ms)
2025-07-14 20:52:18,293 [src.data_loading] INFO: Appended 2 rows up to 2025-07-14 15:05:00 (total 3262 rows)
2025-07-14 20:52:18,598 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-14 20:53:06,916 [__main__] INFO: Retuning using only top SHAP features...
2025-07-14 20:53:24,457 [__main__] INFO: Retraining final model with top features...
2025-07-14 20:53:41,380 [__main__] INFO: Final model saved as models/final_xgb_model.json
2025-07-14 21:01:23,111 [__main__] INFO: Loaded config, starting in pipeline mode
2025-07-14 21:01:23,173 [src.data_loading] INFO: Fetching bars since 2025-07-14 15:05:00 (+1ms)
2025-07-14 21:01:25,799 [src.data_loading] INFO: Appended 2 rows up to 2025-07-14 15:15:00 (total 3264 rows)
2025-07-14 21:01:25,954 [__main__] INFO: Engineered data saved to data/processed/btc_ohlcv_5min_engineered.csv
2025-07-14 21:02:01,713 [__main__] INFO: Retuning using only top SHAP features...
2025-07-14 21:02:20,453 [__main__] INFO: Retraining final model with top features...
2025-07-14 21:02:32,701 [__main__] INFO: Final model saved as models/final_xgb_model.json
